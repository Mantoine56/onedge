(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{47874:function(e,t,a){Promise.resolve().then(a.bind(a,59798))},59798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var n=a(57437),r=a(2265),s=a(6460),l=a(35231),o=a(92566),i=a(54142),d=a(2842),c=a(9542),u=a(85475),m=a(20153),h=a(16638),x=a(25974),f=a(45745),y=a(23909),j=a(85369),p=a(68295),w=a(27561),g=a(86991),b=a(24241),v=a(96273),N=a(50495),D=a(36013),O=a(90837),_=a(83102),k=a(67135),C=a(93146),M=a(37225),T=a(63322),F=a(19573),S=a(51892);let K=["#0088FE","#00C49F","#FFBB28","#FF8042"];function A(){let[e,t]=(0,r.useState)(!1),{transactions:a,addTransaction:A}=(0,M.n)(),[R,z]=(0,r.useState)({revenue:"daily",volume:"daily",avgTransaction:"daily",mrrGrowth:"monthly"}),[Z,E]=(0,r.useState)({from:new Date(new Date().getFullYear(),new Date().getMonth(),1),to:new Date}),[L,W]=(0,r.useState)(null),[Y,U]=(0,r.useState)(null),q=(0,r.useCallback)(e=>{console.log("Calculating chart data with transactions:",e);try{let t=new Date((null==Z?void 0:Z.from)||new Date),a=new Date((null==Z?void 0:Z.to)||new Date),n=e.filter(e=>{let n=new Date(e.date);return n>=t&&n<=a});console.log("Filtered transactions:",n);let r={},l={},o={"0-100":0,"101-500":0,"501-1000":0,"1001+":0},i={},d=new Date(t);for(;d<=a;){let e=(0,s.WU)(d,"MMM yyyy"),t=(0,s.WU)(d,"yyyy-MM-dd");r[e]||(r[e]={total:0,count:0}),l[t]||(l[t]={total:0,count:0}),d.setDate(d.getDate()+1)}n.forEach(e=>{let t=new Date(e.date),a=(0,s.WU)(t,"MMM yyyy"),n=(0,s.WU)(t,"yyyy-MM-dd");r[a].total+=e.amount,r[a].count+=1,l[n].total+=e.amount,l[n].count+=1,e.amount<=100?o["0-100"]++:e.amount<=500?o["101-500"]++:e.amount<=1e3?o["501-1000"]++:o["1001+"]++;let d=(0,s.WU)(t,"MMM yyyy");i[d]=(i[d]||0)+e.amount});let c={daily:Object.entries(l).map(e=>{let[t,a]=e;return{date:t,revenue:a.total}}),monthly:Object.entries(r).map(e=>{let[t,a]=e;return{month:t,revenue:a.total}})},u={daily:Object.entries(l).map(e=>{let[t,a]=e;return{date:t,volume:a.count}}),monthly:Object.entries(r).map(e=>{let[t,a]=e;return{month:t,volume:a.count}})},m={daily:Object.entries(l).map(e=>{let[t,a]=e;return{date:t,amount:a.count>0?a.total/a.count:0}}),monthly:Object.entries(r).map(e=>{let[t,a]=e;return{month:t,amount:a.count>0?a.total/a.count:0}})},h=Object.entries(o).map(e=>{let[t,a]=e;return{name:t,value:a}}),x={monthly:Object.entries(i).map(e=>{let[t,a]=e;return{month:t,mrr:a}})};return console.log("Calculated chart data:",{revenueData:c,transactionVolumeData:u,avgTransactionData:m,transactionDistributionData:h,mrrGrowthData:x}),{revenueData:c,transactionVolumeData:u,avgTransactionData:m,transactionDistributionData:h,mrrGrowthData:x}}catch(e){return console.error("Error calculating chart data:",e),U("An error occurred while calculating chart data."),null}},[Z]);(0,r.useEffect)(()=>{let e=q(a);e&&(W(e),U(null))},[a,q]);let B=async e=>{e.preventDefault();let a=new FormData(e.currentTarget),n=parseFloat(a.get("amount")),r=a.get("customerName"),s=a.get("notes");try{await A({amount:n,customerName:r,notes:s}),t(!1)}catch(e){console.error("Error adding transaction:",e)}},G=e=>{z(t=>({...t,[e]:"daily"===t[e]?"monthly":"daily"}))};return Y?(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-dot-pattern",children:[(0,n.jsx)(S.h,{isAddTransactionOpen:e,setIsAddTransactionOpen:t}),(0,n.jsxs)("main",{className:"flex-1 p-4 md:p-6 overflow-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Analytics"}),(0,n.jsx)("p",{className:"text-red-500",children:Y})]})]}):(0,n.jsxs)("div",{className:"flex flex-col min-h-screen bg-dot-pattern",children:[(0,n.jsx)(S.h,{isAddTransactionOpen:e,setIsAddTransactionOpen:t}),(0,n.jsxs)("main",{className:"flex-1 p-4 md:p-6 overflow-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Analytics"}),(0,n.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,n.jsxs)(F.J2,{children:[(0,n.jsx)(F.xo,{asChild:!0,children:(0,n.jsxs)(N.z,{variant:"outline",className:"w-full md:w-auto justify-start text-left font-normal",children:[(0,n.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),(null==Z?void 0:Z.from)?Z.to?(0,n.jsxs)(n.Fragment,{children:[(0,s.WU)(Z.from,"LLL dd, y")," - ",(0,s.WU)(Z.to,"LLL dd, y")]}):(0,s.WU)(Z.from,"LLL dd, y"):(0,n.jsx)("span",{children:"Pick a date range"})]})}),(0,n.jsx)(F.yk,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(T.f,{initialFocus:!0,mode:"range",defaultMonth:null==Z?void 0:Z.from,selected:Z,onSelect:e=>{(null==e?void 0:e.from)&&(null==e?void 0:e.to)&&E(e)},numberOfMonths:2})})]})}),L&&Object.keys(L).length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(D.Zb,{className:"mb-6",children:[(0,n.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(D.ll,{children:"Revenue"}),(0,n.jsx)(N.z,{onClick:()=>G("revenue"),children:"monthly"===R.revenue?"Switch to Daily":"Switch to Monthly"})]}),(0,n.jsx)(D.aY,{children:(0,n.jsx)(l.h,{width:"100%",height:300,children:(0,n.jsxs)(o.w,{data:L.revenueData[R.revenue],children:[(0,n.jsx)(i.q,{strokeDasharray:"3 3"}),(0,n.jsx)(d.K,{dataKey:"monthly"===R.revenue?"month":"date",allowDataOverflow:!0}),(0,n.jsx)(c.B,{allowDataOverflow:!0}),(0,n.jsx)(u.u,{}),(0,n.jsx)(m.D,{}),(0,n.jsx)(h.x,{type:"monotone",dataKey:"revenue",stroke:"#8884d8",activeDot:{r:8}})]})})})]}),(0,n.jsxs)(D.Zb,{className:"mb-6",children:[(0,n.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(D.ll,{children:"Transaction Volume"}),(0,n.jsx)(N.z,{onClick:()=>G("volume"),children:"monthly"===R.volume?"Switch to Daily":"Switch to Monthly"})]}),(0,n.jsx)(D.aY,{children:(0,n.jsx)(l.h,{width:"100%",height:300,children:(0,n.jsxs)(x.v,{data:L.transactionVolumeData[R.volume],children:[(0,n.jsx)(i.q,{strokeDasharray:"3 3"}),(0,n.jsx)(d.K,{dataKey:"monthly"===R.volume?"month":"date",allowDataOverflow:!0}),(0,n.jsx)(c.B,{allowDataOverflow:!0}),(0,n.jsx)(u.u,{}),(0,n.jsx)(m.D,{}),(0,n.jsx)(f.$,{dataKey:"volume",fill:"#82ca9d"})]})})})]}),(0,n.jsxs)(D.Zb,{className:"mb-6",children:[(0,n.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(D.ll,{children:"Average Transaction Amount"}),(0,n.jsx)(N.z,{onClick:()=>G("avgTransaction"),children:"monthly"===R.avgTransaction?"Switch to Daily":"Switch to Monthly"})]}),(0,n.jsx)(D.aY,{children:(0,n.jsx)(l.h,{width:"100%",height:300,children:(0,n.jsxs)(o.w,{data:L.avgTransactionData[R.avgTransaction],children:[(0,n.jsx)(i.q,{strokeDasharray:"3 3"}),(0,n.jsx)(d.K,{dataKey:"monthly"===R.avgTransaction?"month":"date",allowDataOverflow:!0}),(0,n.jsx)(c.B,{allowDataOverflow:!0}),(0,n.jsx)(u.u,{}),(0,n.jsx)(m.D,{}),(0,n.jsx)(h.x,{type:"monotone",dataKey:"amount",stroke:"#82ca9d"})]})})})]}),(0,n.jsxs)(D.Zb,{className:"mb-6",children:[(0,n.jsx)(D.Ol,{children:(0,n.jsx)(D.ll,{children:"Transaction Distribution"})}),(0,n.jsx)(D.aY,{children:(0,n.jsx)(l.h,{width:"100%",height:300,children:(0,n.jsxs)(y.u,{children:[(0,n.jsx)(j.b,{data:L.transactionDistributionData,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:L.transactionDistributionData.map((e,t)=>(0,n.jsx)(p.b,{fill:K[t%K.length]},"cell-".concat(t)))}),(0,n.jsx)(u.u,{}),(0,n.jsx)(m.D,{})]})})})]}),(0,n.jsxs)(D.Zb,{children:[(0,n.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between",children:[(0,n.jsx)(D.ll,{children:"MRR Growth"}),(0,n.jsx)(N.z,{onClick:()=>G("mrrGrowth"),children:"monthly"===R.mrrGrowth?"Switch to Daily":"Switch to Monthly"})]}),(0,n.jsx)(D.aY,{children:(0,n.jsx)(l.h,{width:"100%",height:300,children:(0,n.jsxs)(w.T,{data:L.mrrGrowthData[R.mrrGrowth],children:[(0,n.jsx)(i.q,{strokeDasharray:"3 3"}),(0,n.jsx)(d.K,{dataKey:"monthly"===R.mrrGrowth?"month":"date",allowDataOverflow:!0}),(0,n.jsx)(c.B,{allowDataOverflow:!0}),(0,n.jsx)(u.u,{}),(0,n.jsx)(m.D,{}),(0,n.jsx)(g.u,{type:"monotone",dataKey:"mrr",stroke:"#8884d8",fill:"#8884d8"})]})})})]})]})]}),(0,n.jsxs)(O.Vq,{open:e,onOpenChange:t,children:[(0,n.jsx)(O.hg,{asChild:!0,children:(0,n.jsxs)(N.z,{variant:"default",className:"fixed bottom-4 right-4 bg-black text-white hover:bg-gray-800 rounded-full p-4 shadow-lg",children:[(0,n.jsx)(v.Z,{className:"h-6 w-6"}),(0,n.jsx)("span",{className:"sr-only",children:"Add Transaction"})]})}),(0,n.jsxs)(O.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(O.fK,{children:[(0,n.jsx)(O.$N,{children:"Add New Transaction"}),(0,n.jsx)(O.Be,{children:"Enter the details of your new transaction here."})]}),(0,n.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(k._,{htmlFor:"amount",children:"Amount"}),(0,n.jsx)(_.I,{id:"amount",name:"amount",type:"number",step:"0.01",placeholder:"0.00",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(k._,{htmlFor:"customerName",children:"Customer Name"}),(0,n.jsx)(_.I,{id:"customerName",name:"customerName",type:"text",placeholder:"Enter customer name",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(k._,{htmlFor:"notes",children:"Notes"}),(0,n.jsx)(C.g,{id:"notes",name:"notes",placeholder:"Enter any additional notes here..."})]}),(0,n.jsx)(N.z,{type:"submit",className:"w-full",children:"Add Transaction"})]})]})]})]})}},63322:function(e,t,a){"use strict";a.d(t,{f:function(){return d}});var n=a(57437);a(2265);var r=a(70518),s=a(87592),l=a(83045),o=a(37440),i=a(50495);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,n.jsx)(l._W,{showOutsideDays:d,className:(0,o.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,o.cn)((0,i.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,o.cn)((0,i.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:()=>(0,n.jsx)(r.Z,{className:"h-4 w-4"}),IconRight:()=>(0,n.jsx)(s.Z,{className:"h-4 w-4"})},...c})}d.displayName="Calendar"},36013:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var n=a(57437),r=a(2265),s=a(37440);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});i.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},19573:function(e,t,a){"use strict";a.d(t,{J2:function(){return o},xo:function(){return i},yk:function(){return d}});var n=a(57437),r=a(2265),s=a(61485),l=a(37440);let o=s.fC,i=s.xz,d=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:o=4,...i}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsx)(s.VY,{ref:t,align:r,sideOffset:o,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});d.displayName=s.VY.displayName},93146:function(e,t,a){"use strict";a.d(t,{g:function(){return l}});var n=a(57437),r=a(2265),s=a(37440);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});l.displayName="Textarea"}},function(e){e.O(0,[358,533,609,71,352,897,277,708,971,23,744],function(){return e(e.s=47874)}),_N_E=e.O()}]);