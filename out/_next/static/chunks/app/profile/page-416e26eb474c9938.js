(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{89818:function(e,a,r){Promise.resolve().then(r.bind(r,57562))},57562:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return k}});var s=r(57437),t=r(2265),n=r(16463),l=r(47065),i=r(37225),c=r(51892),d=r(40169),o=r(50495),u=r(36013),h=r(83102),m=r(67135),x=r(90837),f=r(4086),p=r(78030);let j=(0,p.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),y=(0,p.Z)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),v=(0,p.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),N=(0,p.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var g=r(927),w=r(5186);function k(){var e,a;let[r,p]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),[b,R]=(0,t.useState)(!1),[A,S]=(0,t.useState)(!1),[Z,E]=(0,t.useState)(null),{user:O}=(0,l.a)(),{deleteAllTransactions:P}=(0,i.n)(),z=(0,n.useRouter)(),L=async()=>{if(null==O?void 0:O.email){try{await (0,w.LS)(g.I,O.email),E({type:"success",message:"Password reset email sent. Check your inbox."})}catch(e){console.error("Error sending password reset email:",e),E({type:"error",message:"Failed to send password reset email. Please try again."})}p(!1)}},M=async()=>{if(O){try{await (0,w.h8)(O),E({type:"success",message:"Your account has been deleted."}),z.push("/login")}catch(e){console.error("Error deleting account:",e),E({type:"error",message:"Failed to delete account. Please try again."})}C(!1)}},T=async()=>{try{await P(),E({type:"success",message:"Your account data has been reset."})}catch(e){console.error("Error resetting account data:",e),E({type:"error",message:"Failed to reset account data. Please try again."})}R(!1)};return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-dot-pattern",children:[(0,s.jsx)(c.h,{isAddTransactionOpen:A,setIsAddTransactionOpen:S}),(0,s.jsxs)("main",{className:"flex-1 p-4 md:p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"User Profile"}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsx)(u.Ol,{children:(0,s.jsx)(u.ll,{children:"Personal Information"})}),(0,s.jsxs)(u.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(d.qE,{className:"h-20 w-20",children:(0,s.jsx)(d.Q5,{children:(null==O?void 0:null===(e=O.displayName)||void 0===e?void 0:e[0])||(null==O?void 0:null===(a=O.email)||void 0===a?void 0:a[0])||"U"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:(null==O?void 0:O.displayName)||"User"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Member since ",(null==O?void 0:O.metadata.creationTime)?new Date(O.metadata.creationTime).toLocaleDateString():"Unknown"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"email",children:"Email"}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,s.jsx)(h.I,{id:"email",value:(null==O?void 0:O.email)||"",readOnly:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"phone",children:"Phone"}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[(0,s.jsx)(j,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,s.jsx)(h.I,{id:"phone",value:(null==O?void 0:O.phoneNumber)||"Not provided",readOnly:!0})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsxs)(o.z,{onClick:()=>p(!0),children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"})," Reset Password"]}),(0,s.jsxs)(o.z,{variant:"destructive",onClick:()=>C(!0),children:[(0,s.jsx)(v,{className:"mr-2 h-4 w-4"})," Delete Account"]}),(0,s.jsxs)(o.z,{variant:"outline",onClick:()=>R(!0),children:[(0,s.jsx)(N,{className:"mr-2 h-4 w-4"})," Reset Account Data"]})]})]})]})]}),(0,s.jsx)(x.Vq,{open:r,onOpenChange:p,children:(0,s.jsxs)(x.cZ,{children:[(0,s.jsxs)(x.fK,{children:[(0,s.jsx)(x.$N,{children:"Reset Password"}),(0,s.jsx)(x.Be,{children:"Are you sure you want to reset your password? We'll send you an email with instructions."})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,s.jsx)(o.z,{onClick:L,children:"Send Reset Email"})]})]})}),(0,s.jsx)(x.Vq,{open:k,onOpenChange:C,children:(0,s.jsxs)(x.cZ,{children:[(0,s.jsxs)(x.fK,{children:[(0,s.jsx)(x.$N,{children:"Delete Account"}),(0,s.jsx)(x.Be,{children:"Are you sure you want to delete your account? This action cannot be undone."})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,s.jsx)(o.z,{variant:"destructive",onClick:M,children:"Delete Account"})]})]})}),(0,s.jsx)(x.Vq,{open:b,onOpenChange:R,children:(0,s.jsxs)(x.cZ,{children:[(0,s.jsxs)(x.fK,{children:[(0,s.jsx)(x.$N,{children:"Reset Account Data"}),(0,s.jsx)(x.Be,{children:"Are you sure you want to reset your account data? This will delete all your transactions."})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)(o.z,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,s.jsx)(o.z,{variant:"destructive",onClick:T,children:"Reset Data"})]})]})}),Z&&(0,s.jsx)("div",{className:"fixed bottom-4 right-4 p-4 rounded-md ".concat("success"===Z.type?"bg-green-500":"bg-red-500"," text-white"),children:Z.message})]})}},40169:function(e,a,r){"use strict";r.d(a,{qE:function(){return N},Q5:function(){return g}});var s=r(57437),t=r(2265),n=r(98324),l=r(75137),i=r(1336),c=r(25171),d="Avatar",[o,u]=(0,n.b)(d),[h,m]=o(d),x=t.forwardRef((e,a)=>{let{__scopeAvatar:r,...n}=e,[l,i]=t.useState("idle");return(0,s.jsx)(h,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:i,children:(0,s.jsx)(c.WV.span,{...n,ref:a})})});x.displayName=d;var f="AvatarImage",p=t.forwardRef((e,a)=>{let{__scopeAvatar:r,src:n,onLoadingStatusChange:d=()=>{},...o}=e,u=m(f,r),h=function(e){let[a,r]=t.useState("idle");return(0,i.b)(()=>{if(!e){r("error");return}let a=!0,s=new window.Image,t=e=>()=>{a&&r(e)};return r("loading"),s.onload=t("loaded"),s.onerror=t("error"),s.src=e,()=>{a=!1}},[e]),a}(n),x=(0,l.W)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==h&&x(h)},[h,x]),"loaded"===h?(0,s.jsx)(c.WV.img,{...o,ref:a,src:n}):null});p.displayName=f;var j="AvatarFallback",y=t.forwardRef((e,a)=>{let{__scopeAvatar:r,delayMs:n,...l}=e,i=m(j,r),[d,o]=t.useState(void 0===n);return t.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(e)}},[n]),d&&"loaded"!==i.imageLoadingStatus?(0,s.jsx)(c.WV.span,{...l,ref:a}):null});y.displayName=j;var v=r(37440);let N=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(x,{ref:a,className:(0,v.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...t})});N.displayName=x.displayName,t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(p,{ref:a,className:(0,v.cn)("aspect-square h-full w-full",r),...t})}).displayName=p.displayName;let g=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(y,{ref:a,className:(0,v.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...t})});g.displayName=y.displayName},36013:function(e,a,r){"use strict";r.d(a,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var s=r(57437),t=r(2265),n=r(37440);let l=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t})});l.displayName="Card";let i=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...t})});i.displayName="CardHeader";let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});c.displayName="CardTitle";let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent";let u=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",r),...t})});u.displayName="CardFooter"},4086:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(78030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])}},function(e){e.O(0,[358,533,609,71,352,708,971,23,744],function(){return e(e.s=89818)}),_N_E=e.O()}]);